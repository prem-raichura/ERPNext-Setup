# Custom ERPNext & HRMS Docker Setup

![ERPNext Version](https://img.shields.io/badge/ERPNext-v15-blue?style=flat-square&logo=erpnext)
![Frappe Version](https://img.shields.io/badge/Frappe-v15-blue?style=flat-square&logo=frappe)
![HRMS](https://img.shields.io/badge/HRMS-Enabled-success?style=flat-square)
![Docker](https://img.shields.io/badge/Docker-Container-2496ED?style=flat-square&logo=docker)
![Platform](https://img.shields.io/badge/Platform-Linux%20Containers-important?style=flat-square)
![License](https://img.shields.io/badge/License-GPL--3.0-green?style=flat-square)
![Status](https://img.shields.io/badge/Status-Active-success?style=flat-square)

A comprehensive guide to building and running a **custom Docker image** for **[Frappe](https://frappe.io/)** and **[ERPNext](https://erpnext.com/)** (v15), including the **[HRMS](https://github.com/frappe/hrms)** app.  
This setup is built on top of the official **[Frappe Docker](https://github.com/frappe/frappe_docker)** infrastructure and follows best practices for local development.

---

## ‚ú® Highlights

- üê≥ Custom Docker image with bundled ERPNext + HRMS
- ‚öôÔ∏è Clean `compose.yaml` & `.env` workflow
- üì¶ App bundling via `apps.json`
- üîÅ Easy upgrades & app additions
- üë®‚Äçüíª Developer & CI-friendly setup

---

## üìã Prerequisites

Before starting, ensure you have the following tools installed:

1. **Git Bash** ‚Äì [Download](https://git-scm.com/downloads)  
2. **Docker Desktop** ‚Äì [Download](https://www.docker.com/products/docker-desktop)  

> [!IMPORTANT]  
> **Docker Configuration Required**  
> - Docker Desktop **must run in Linux container mode**  
> - Windows containers are **not supported**  
> - Initial startup may take **2‚Äì5 minutes**

> [!TIP]  
> Allocate at least **6‚Äì8 GB RAM** to Docker for smooth ERPNext operation.

---

## üöÄ Installation Guide

Follow these steps **in order** to set up your environment.

### Step 1: Clone the Repository

Clone the official Frappe Docker repository:

```bash
git clone https://github.com/frappe/frappe_docker
cd frappe_docker
```

---

### Step 2: Create `apps.json`

Create an `apps.json` file in the same directory where `compose.yaml` is present.

```json
[
  {
    "url": "https://github.com/frappe/erpnext",
    "branch": "version-16"
  },
  {
    "url": "https://github.com/frappe/hrms",
    "branch": "version-16"
  }
]
```

This file defines which apps will be bundled into the custom Docker image.

---

### Step 3: Generate Base64 String

Run the following command in **PowerShell / CMD**:

```powershell
powershell -NoProfile -Command "[Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes((Get-Content apps.json -Raw)))"
```

Copy the **entire Base64 string** generated by the command.

---

### Step 4: Build the Custom Docker Image

Replace `PASTE_NEW_STRING_HERE` with the Base64 string copied above.

```bash
docker build ^
  --build-arg=PYTHON_VERSION=3.12 ^
  --build-arg=FRAPPE_PATH=https://github.com/frappe/frappe ^
  --build-arg=FRAPPE_BRANCH=version-16 ^
  --build-arg=APPS_JSON_BASE64=PASTE_NEW_STRING_HERE ^
  --tag=custom-erpnext-hrms:v16 ^
  --file=images/custom/Containerfile .
```

‚è≥ Build time: **10‚Äì15 minutes** (depends on internet & system resources)

---

### Step 5: Configure Docker Compose

- Replace the default `compose.yaml`
- Add the `.env` file into the `frappe_docker` directory

> [!WARNING]  
> Do not commit `.env` files containing secrets to public repositories.

---

### Step 6: Start Containers

```bash
docker compose up -d
docker ps
```

Verify that all containers are running and healthy.

---

### Step 7: Create Site and Install Apps

Create a new site:

```bash
docker compose exec backend bench new-site erp.localhost
```

You will be prompted to set:
- MariaDB root password
- Administrator password

Install ERPNext and HRMS:

```bash
docker compose exec backend bench --site erp.localhost install-app erpnext
docker compose exec backend bench --site erp.localhost install-app hrms
```

---

### Step 8: Access ERPNext

Open your browser and navigate to:

```
http://erp.localhost:8080
```

Login using:
- **Username:** Administrator  
- **Password:** The password you set during site creation

---

## ‚ûï Adding a New App

To add another Frappe app later:

### Step 1: Update `apps.json`

```json
{
  "url": "NEW_APP_REPOSITORY_URL",
  "branch": "APP_BRANCH"
}
```

---

### Step 2: Rebuild Docker Image

```bash
docker build ^
  --build-arg=PYTHON_VERSION=3.12 ^
  --build-arg=FRAPPE_PATH=https://github.com/frappe/frappe ^
  --build-arg=FRAPPE_BRANCH=version-16 ^
  --build-arg=APPS_JSON_BASE64=PASTE_NEW_STRING_HERE ^
  --tag=custom-erpnext-hrms:v16-updated ^
  --file=images/custom/Containerfile .
```

---

### Step 3: Update `.env` and Restart

Update the image tag in `.env`:

```env
CUSTOM_TAG=v16-updated
```

Restart containers:

```bash
docker compose down
docker compose up -d
```

---

### Step 4: Install the New App

```bash
docker compose exec backend bench --site erp.localhost install-app NEW_APP_NAME
```

---

## ‚ÑπÔ∏è Notes

- Ideal for **local development & testing**
- For production, configure:
  - Backups
  - SSL
  - Firewall & secrets
  - Resource limits

---

## ‚≠ê Support

If this guide helped you:
- ‚≠ê Star the repository
- üêû Open issues
- ü§ù Submit pull requests

---

## üßë‚Äçüíª Author

[**Prem Raichura**](https://portfolio-prem-raichura.vercel.app/)
* **GitHub:** [prem-raichura](https://github.com/prem-raichura)
* **LinkedIn:** [prem-raichura](https://www.linkedin.com/in/prem-raichura/)

